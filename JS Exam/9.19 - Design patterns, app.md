# DESIGN PATTERNS

* module
* prototype
* singleton
* OLOO


## Module pattern

```javascript
const budget = ((() => {
    
    const x = 23;
    const add = (a) => x + a;
    
    return{
        public(b) {
            return add(b);
        }
    }
}))();



const controller = (((budgetC) => {
   var z = budget.public(4);

    return {
       nextPublic(){
           console.log(z);
       } 
    }
}))(budget); //This name can't change!!! (the above can be whatever you want)



controller.nextPublic();

```
## Prototype

```js
class Lib {
  constructor() {
    this.name = "Filip"
  }

  go() {
console.log("Hello!");
  }
}

const el = new Lib();
el.go();


```

## Singleton


```js
let instance = null;

class Cache{  
    constructor() {
        if(!instance){
              instance = this;
        }

        // to test whether we have singleton or not
        this.time = new Date()

        return instance;
      }
}



 let cache = new Cache()
 console.log(cache.time);

 setTimeout(() => {
   let cache = new Cache();
   console.log(cache.time);
 },3000);
```

## OLOO
* objects linked to other objects
* designed by Kyle Simpson

```js

let Car = {
   init(name){
       this.name = name;
   },
    say(){
        console.log(`I have ${this.name} car`);
    }
};


let filipCar = Object.create(Car);
let terkaCar = Object.create(Car);

filipCar.init("Audi");
terkaCar.init("Porsche");
terkaCar.say();
```




## App - Runny

```javascript
const UICtrl = (() => {
	class Run {
		constructor(id, title, dist, date) {
			this.id = id;
			this.title = title;
			this.dist = dist;
			this.date = getDate();
		}
	}
	
	class Bike {
		constructor(id, title, dist, date) {
			this.id = id;
			this.title = title;
			this.dist = dist;
			this.date = getDate();
		}
	}
	
	let data = {
			activities: {
				Run: [],
				Bike: []
			},
			total: {
				Run: 0,
				Bike: 0,
			}
		}
	
		//--------------------------------------
	const getDate = () => {
		let now;
		let months;
		let month;
		let year;
		now = new Date();
		months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
		month = now.getMonth();
		year = now.getFullYear();
		day = now.getDate();
		if (day < 10) {
			day = `0` + day;
		}
		if (month > 10) {
			month = "0" + month;
		}
		return `  ${day} ${months[month]} ${year}`;
	}
	
	
	
	
	return {
		//--------------------------------------
		add(type, title, dist, date) {
			let ID;
			let newActivity;
			if (data.activities[type].length > 0) {
				ID = data.activities[type][data.activities[type].length - 1].id + 1;
			} else {
				ID = 0;
			}
			if (type === "Run") {
				newActivity = new Run(ID, title, dist);
			}
			if (type === "Bike") {
				newActivity = new Bike(ID, title, dist);
			}
			data.activities[type].push(newActivity);
			return newActivity;
		},
		
		delete() {
			//......
		},
		
		//--------------------------------------
		calc(type) {
			let sum = 0;
			let avg = 0;
			data.activities[type].forEach(cur => {
				sum += cur.dist;
			});
			data.total[type] = sum;
			return data.total[type];
		}
	}
	
})();




/*------------------------------------------------------------------------------------------------------------------------*/
const DOMCtrl = ((UICtrl) => {
	const DOMStrings = {
		date: "#date",
		desc: "#desc",
		dist: "#dist",
		btn: "#btn",
		total: "#total",
		data: "#data",
		selected: "#sel"
	};
	
	return {
		//--------------------------------------      
		addList(obj, type) {
			let html;
			if (type === "Run") {
				html = `<h2 class="run" id="${obj.id}">${obj.title} ${obj.dist} <span class="date">${obj.date}</span></h2>`;
			}
			if (type === "Bike") {
				html = `<h2 class="bike" id="${obj.id}">${obj.title} ${obj.dist} <span class="date">${obj.date}</span></h2>`;
			}
			document.querySelector(DOMStrings.data).insertAdjacentHTML("beforeend", html);
		},
		
		deleteList() {
			//....    
		},
		
		//--------------------------------------
		getInput() {
			return {
				type: document.querySelector(DOMStrings.selected).value,
				desc: document.querySelector(DOMStrings.desc).value,
				dist: parseFloat(document.querySelector(DOMStrings.dist).value),
				date: new Date().getFullYear()
			}
		},
		
		//--------------------------------------
		add2DOM() {
			let data = DOMCtrl.getInput();
			let newActivity = UICtrl.add(data.type, data.desc, data.dist, data.date)
			DOMCtrl.addList(newActivity, data.type);
			let sum = UICtrl.calc("Run") + UICtrl.calc("Bike");
			document.querySelector(DOMStrings.total).innerHTML = `${sum}`;
			return newActivity;
		},
		
		//--------------------------------------      
		addEL() {
			document.querySelector(DOMStrings.btn).addEventListener("click", this.add2DOM);
		},
		
		//--------------------------------------    
		init() {
			console.log("App has started.");
			this.addEL();
		}
		
	}
})(UICtrl);


DOMCtrl.init();
```


```html



<input id="desc" placeholder="Enter Description"/>
<input id="dist" placeholder="Enter distance" placeholder="Distance"/>

<select id="sel">
<option value = "Run">Run</option>
<option value = "Bike">Bike</option>
</select>


<button id="btn">+</button>

<section id="total">
</section>

<section id="data">



</section>

<style>
    #data,#total{width:30em;margin:1em;padding:1em;color:#fff}#data,button{background:#fff}*{font-family:Arial,sans-serif;margin:0;padding:0}input{padding:1em;margin-top:1em;margin-left:1.3em}#total{display:flex;justify-content:center;align-items:center;height:3em;font-size:1em;font-weight:700;background:#66BB6A}#data{height:10em}.run,button{color:#66BB6A}button{border:none;font-size:1.3em;margin-left:2em}.bike{color:#FF5722}.date{color:#000}
</style>
```



# App - Game

```js
/*
GAME RULES:

- The game has 2 players, playing in rounds
- In each turn, a player rolls a dice as many times as he whishes. Each result get added to his ROUND score
- BUT, if the player rolls a 1, all his ROUND score gets lost. After that, it's the next player's turn
- The player can choose to 'Hold', which means that his ROUND score gets added to his GLBAL score. After that, it's the next player's turn
- The first player to reach 100 points on GLOBAL score wins the game

*/

const GAMECtrl = (() => {
  
  let scores;
  let roundScore;
  let activePlayer;
  let gamePlaying;



  /*----------------------------------------------------------------------------*/
  document.querySelector(".btn-roll").addEventListener("click", () => {
    if (gamePlaying) {
      let dice = Math.floor(Math.random() * 6) + 1;

      if (dice !== 1) {
        roundScore += dice;
        document.querySelector(`#current-${activePlayer}`).textContent = roundScore;
      } else {
        nextPlayer();
      }
    }
  });



  /*----------------------------------------------------------------------------*/
  document.querySelector(".btn-hold").addEventListener("click", () => {
   
   if (gamePlaying) {
      scores[activePlayer] += roundScore;

      document.querySelector(`#score-${activePlayer}`).textContent =
        scores[activePlayer];

      if (scores[activePlayer] >= 100) {
        document.querySelector(`#name-${activePlayer}`).textContent = "Winner!";

        document
          .querySelector(`.player-${activePlayer}-panel`)
          .classList.add("winner");
        document
          .querySelector(`.player-${activePlayer}-panel`)
          .classList.remove("active");
        gamePlaying = false;
      } else {
        nextPlayer();
      }
    }
  });

  /*----------------------------------------------------------------------------*/
  function nextPlayer() {
    activePlayer === 0 ? (activePlayer = 1) : (activePlayer = 0);
    roundScore = 0;

    document.getElementById("current-0").textContent = "0";
    document.getElementById("current-1").textContent = "0";
    document.querySelector(".player-0-panel").classList.toggle("active");
    document.querySelector(".player-1-panel").classList.toggle("active");
  }

  document.querySelector(".btn-new").addEventListener("click", init);

  /*----------------------------------------------------------------------------*/
  function init() {
    scores = [0, 0];
    activePlayer = 0;
    roundScore = 0;
    gamePlaying = true;

    document.getElementById("score-0").textContent = "0";
    document.getElementById("score-1").textContent = "0";
    document.getElementById("current-0").textContent = "0";
    document.getElementById("current-1").textContent = "0";
    document.getElementById("name-0").textContent = "Player 1";
    document.getElementById("name-1").textContent = "Player 2";
    document.querySelector(".player-0-panel").classList.remove("winner");
    document.querySelector(".player-1-panel").classList.remove("winner");
    document.querySelector(".player-0-panel").classList.remove("active");
    document.querySelector(".player-1-panel").classList.remove("active");
    document.querySelector(".player-0-panel").classList.add("active");
  }

  /*----------------------------------------------------------------------------*/
  return {
    init
  };
})();

GAMECtrl.init();







/*
YOUR 3 CHALLENGES
Change the game to follow these rules:

1. A player looses his ENTIRE score when he rolls two 6 in a row. After that, it's the next player's turn. (Hint: Always save the previous dice roll in a separate variable)
2. Add an input field to the HTML where players can set the winning score, so that they can change the predefined score of 100. (Hint: you can read that value with the .value property in JavaScript. This is a good oportunity to use google to figure this out :)
3. Add another dice to the game, so that there are two dices now. The player looses his current score when one of them is a 1. (Hint: you will need CSS to position the second dice, so take a look at the CSS code for the first one.)
*/


```


```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css?family=Lato:100,300,600" rel="stylesheet" type="text/css">
  <link href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css">
  <link type="text/css" rel="stylesheet" href="style.css">

  <title>Pig Game</title>
</head>

<body>
  <div class="wrapper clearfix">
    <div class="player-0-panel active">
      <div class="player-name" id="name-0">Player 1</div>
      <div class="player-score" id="score-0">43</div>
      <div class="player-current-box">
        <div class="player-current-label">Current</div>
        <div class="player-current-score" id="current-0">11</div>
      </div>
    </div>

    <div class="player-1-panel">
      <div class="player-name" id="name-1">Player 2</div>
      <div class="player-score" id="score-1">72</div>
      <div class="player-current-box">
        <div class="player-current-label">Current</div>
        <div class="player-current-score" id="current-1">0</div>
      </div>
    </div>

    <button class="btn-new"><i class="ion-ios-plus-outline"></i>New game</button>
    <button class="btn-roll"><i class="ion-ios-loop"></i>Roll dice</button>
    <button class="btn-hold"><i class="ion-ios-download-outline"></i>Hold</button>

    <input type="text" placeholder="Final score" class="final-score">

    <img src="dice-5.png" alt="Dice" class="dice" id="dice-1">
    <img src="dice-5.png" alt="Dice" class="dice" id="dice-2">
  </div>


</body>

</html>
```


```
.final-score,.player-current-label,.player-name,button{text-transform:uppercase}.final-score:focus,button:focus{outline:0}.final-score{position:absolute;left:50%;transform:translateX(-50%);top:520px;color:#555;font-size:18px;font-family:Lato;text-align:center;padding:10px;width:160px}body,button{font-family:Lato}#dice-1{top:120px}#dice-2{top:250px}*{margin:0;padding:0;box-sizing:border-box}.clearfix::after{content:"";display:table;clear:both}body{background-image:linear-gradient(rgba(62,20,20,.4),rgba(62,20,20,.4)),url(back.jpg);background-size:cover;background-position:center;font-weight:300;position:relative;height:100vh;color:#555}.player-name,.player-score{font-weight:100;text-align:center}.wrapper{width:1000px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;box-shadow:0 10px 50px rgba(0,0,0,.3);overflow:hidden}.dice,button{left:50%;transform:translateX(-50%)}.player-0-panel,.player-1-panel{width:50%;float:left;height:600px;padding:100px}.player-name{font-size:40px;letter-spacing:2px;margin-top:20px;margin-bottom:10px;position:relative}.dice,button{position:absolute}.player-score{font-size:80px;color:#EB4D4D;margin-bottom:130px}.active .player-name,button{font-weight:300}.active{background-color:#f7f7f7}.active .player-name::after{content:"\2022";font-size:47px;position:absolute;color:#EB4D4D;top:-7px;right:10px}.player-current-box{background-color:#EB4D4D;color:#fff;width:40%;margin:0 auto;padding:12px;text-align:center}.player-current-label{margin-bottom:10px;font-size:12px;color:#222}.player-current-score{font-size:30px}button{width:200px;color:#555;background:0 0;border:none;font-size:20px;cursor:pointer;transition:background-color .3s,color .3s}button:hover{font-weight:600}button:hover i{margin-right:20px}i{color:#EB4D4D;display:inline-block;margin-right:15px;font-size:32px;line-height:1;vertical-align:text-top;margin-top:-4px;transition:margin .3s}.btn-new{top:45px}.btn-roll{top:403px}.btn-hold{top:467px}.dice{top:178px;height:100px;box-shadow:0 10px 60px rgba(0,0,0,.1)}.winner{background-color:#f7f7f7}.winner .player-name{font-weight:300;color:#EB4D4D}
```
